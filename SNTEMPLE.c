#include<stdio.h>
long long int h[100001];
int main()
{
	long long int t,n,i,left,start,right,count,j,k;
	scanf("%lld",&t);
	while(t)
	{
		scanf("%lld",&n);
		for(i=1;i<=n;i++)
		scanf("%lld",&h[i]);
		if(n%2!=0)
		{
			left=1;
			for(i=1;i<=((n+1)/2);i++)
			{
				if(h[i]<i)
				{
					start=i-h[i]+1;
					if(start>left)
					left=start;
				}
			}
			right=n;
			for(i=n;i>=((n+3)/2);i--)
			{
				if((i+h[i])<=n)
				{
					start=i+h[i]-1;
					if(start<right)
					right=start;
				}
			}
		}
		else
		{
			left=1;
			for(i=1;i<=(n/2);i++)
			{
				if(h[i]<i)
				{
					start=i-h[i]+1;
					if(start>left)
					left=start;
				}
			}
			right=n;
			for(i=n;i>(n/2);i--)
			{
				if((i+h[i])<=n)
				{
					start=i+h[i]-1;
					if(start<right)
					right=start;
				}
			}
		}
		count=0;
		if(((right-left)%2)!=0)
		left=left+1;
		for(i=1;i<left;i++)
		count=count+h[i];
		k=1;
		for(i=left;i<=(left+((right-left)/2));i++)
		{
			count=count+(h[i]-k);
			k++;
		}
		k=1;
		for(j=right;j>=i;j--)
		{
			count=count+(h[j]-k);
			k++;
		}
		for(i=right+1;i<=n;i++)
		count=count+h[i];
		printf("%lld\n",count);		
		t--;
	}
}
